\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{uestc-mini/core}

\usepackage[UTF8, heading]{ctex}
\RequirePackage{geometry}
\RequirePackage{calc}
\RequirePackage{fancyhdr}
\RequirePackage{hyperref}


% 页面尺寸
\geometry{
  width=210mm-30mm*2,
  height=297mm-35mm*2,
  headheight=13pt,
  headsep=7.5mm,
  footskip=7.5mm+12.65pt,
  centering,
  a4paper}


% 章节标题
\ctexset{contentsname={目\enspace{}录}}
\ctexset{chapter={
  nameformat={},titleformat={},
  format={\heiti\zihao{-3}\centering},
  aftername={\enspace},
  beforeskip={-6bp},
  afterskip={18bp plus 3.6bp minus 3.6bp},
}}
\ctexset{section={
  format={\heiti\zihao{4}\flushleft},
  aftername={\enspace},
  beforeskip={18bp},
  afterskip={6bp plus 1.2bp minus 1.2bp},
}}
\ctexset{subsection={
  format={\heiti\zihao{4}\flushleft},
  aftername={\enspace},
  beforeskip={12bp},
  afterskip={6bp plus 1.2bp minus 1.2bp},
}}
\ctexset{subsubsection={
  format={\heiti\zihao{-4}\flushleft},
  aftername={\enspace},
  beforeskip={12bp},
  afterskip={6bp plus 1.2bp minus 1.2bp},
}}


% 页眉页脚
\renewcommand{\chaptermark}[1]
  {\markboth{\CTEXthechapter\enspace{}#1}{}}

\newcommand{\MainPageStyle}[1]{
  \fancyhf{}
  \fancyhead[OC]{\zihao{5}\leftmark}
  \fancyhead[EC]{\zihao{5}#1}
  \fancyfoot[C]{\zihao{-5}\thepage}}
\newcommand{\setMainPageStyle}[1]{
  \fancypagestyle{MainPage}{\MainPageStyle{#1}}
  \fancypagestyle{plain}{\MainPageStyle{#1}}
  \pagestyle{MainPage}}

\newcommand{\FrontPageStyle}[1]{
  \fancyhf{}
  \fancyhead[C]{\zihao{5}#1}
  \fancyfoot[C]{\zihao{-5}\thepage}}
\newcommand{\setFrontPageStyle}[1]{
  \fancypagestyle{FrontPage}{\FrontPageStyle{#1}}
  \fancypagestyle{plain}{\FrontPageStyle{#1}}
  \pagestyle{FrontPage}}


% 杂项
\raggedbottom
\parskip=0pt plus 8pt minus 2pt

%% 设置行距值修正
%%（由于ctex的\baselinestretch=1.3)
\newlength{\LineSkip}
\setlength{\LineSkip}{20bp*\ratio{1.0pt}{1.3pt}}

%% 正文小四20磅行距
\newcommand{\setMainFontSize}
  {\fontsize{12.1pt}{\LineSkip}\selectfont}
%% 参考文献五号20磅行距
\newcommand{\setBibFontSize}
  {\fontsize{10.5pt}{\LineSkip}\selectfont}

\AtBeginDocument{\setMainFontSize}
