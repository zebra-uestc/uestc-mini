\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{uestc-mini/core}

\usepackage[UTF8, heading]{ctex}
\RequirePackage{geometry}
\RequirePackage{calc}
\RequirePackage{fancyhdr}
\RequirePackage{hyperref}


% 页面尺寸
\geometry{
  width=210mm-30mm*2,
  height=297mm-35mm*2,
  headheight=13pt,
  headsep=7.5mm,
  footskip=7.5mm+12.65pt,
  centering,
  a4paper}

% 章节标题
\ctexset{contentsname={目\enspace{}录}}
\ctexset{chapter={
  number={\arabic{chapter}},
  nameformat={},titleformat={},
  format={\heiti\zihao{-3}\centering},
  aftername={\enspace},
  beforeskip={0bp plus 6bp minus 8bp},
  afterskip={30bp plus 6bp minus 8bp},
}}
\ctexset{section={
  format={\heiti\zihao{4}\flushleft},
  aftername={\enspace},
  beforeskip={18bp},
  afterskip={18bp plus 3.6bp minus 3.6bp},
}}
\ctexset{subsection={
  format={\heiti\zihao{4}\flushleft},
  aftername={\enspace},
  beforeskip={12bp},
  afterskip={12bp plus 2.4bp minus 2.4bp},
}}
\ctexset{subsubsection={
  format={\heiti\zihao{-4}\flushleft},
  aftername={\enspace},
  beforeskip={6bp},
  afterskip={6bp plus 1.2bp minus 1.2bp},
}}

% 页眉页脚
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]
  {\markboth{\CTEXthechapter\enspace{}#1}{}}
\newcommand{\setMainHeadStyle}{
  \fancyhf{}
  \fancyhead[OC]{\zihao{5}\leftmark}
  \fancyhead[EC]{\zihao{5}电子科技大学学士学位论文}
  \fancyfoot[C]{\zihao{-5}\thepage}}
\newcommand{\setFrontHeadStyle}[1]{
  \fancyhf{}
  \fancyhead[C]{\zihao{5}#1}
  \fancyfoot[C]{\zihao{-5}\thepage}}

% 杂项
\raggedbottom
\parskip=0pt plus 8pt minus 2pt

%% 设置行距值修正
%%（由于ctex的\baselinestretch=1.3)
\newlength{\LineSkip}
\setlength{\LineSkip}{20bp*\ratio{1.0pt}{1.3pt}}

%% 正文小四20磅行距
\newcommand{\setMainFontSize}
  {\fontsize{12.1pt}{\LineSkip}\selectfont}
%% 参考文献五号20磅行距
\newcommand{\setBibFontSize}
  {\fontsize{10.5pt}{\LineSkip}\selectfont}

\AtBeginDocument{\setMainFontSize}
